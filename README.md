**План проекта: Telegram-бот для получения прогноза погоды (WeatherBot)**  

---

### **1. Цель проекта**  
Создать полезного Telegram-бота, который:  
- Предоставляет актуальную погоду по запросу пользователя.  
- Показывает прогноз на день и 3 дня.  
- Отправляет ежедневные уведомления в заданное время.  
- Сохраняет настройки пользователей (город по умолчанию, подписка на уведомления).  
- Помогает освоить работу с API, библиотеками и асинхронными задачами.  

---

### **2. Основной функционал**  
- **Погода сейчас**:  
  - Температура, ощущаемая температура, влажность, ветер, описание.  
  - Эмодзи в зависимости от погодных условий.  
- **Прогноз на день**:  
  - Почасовая информация (утро, день, вечер, ночь).  
  - Общая сводка за день.  
- **Прогноз на 3 дня**:  
  - Минимальная, максимальная и средняя температура.  
  - Вероятность осадков, скорость ветра.  
- **Настройки**:  
  - Установка города по умолчанию.  
  - Включение/выключение ежедневных уведомлений.  
- **Ежедневные уведомления**:  
  - Автоматическая отправка прогноза в 6:00.  

---

### **3. Используемые технологии**  
- **Язык программирования**: Python 3.9+  
- **Библиотеки**:  
  - `python-telegram-bot` для работы с Telegram API.  
  - `requests` для запросов к WeatherAPI.  
  - `schedule` и `threading` для планирования ежедневных уведомлений.  
  - `python-dotenv` для управления переменными окружения.  
- **API**:  
  - [WeatherAPI](https://www.weatherapi.com/) (бесплатный тариф).  
- **Хранение данных**:  
  - JSON-файл (`user_settings.json`) для сохранения настроек пользователей.  

---

### **4. Структура проекта**  
```
WeatherBot/  
├── main.py                 # Основной код бота  
├── .env                    # Файл с токенами (TELEGRAM_TOKEN, OWM_API_KEY)  
├── user_settings.json      # Настройки пользователей  
├── requirements.txt        # Зависимости  
└── README.md               # Инструкция по установке  
```

---

### **5. Этапы разработки**  
1. **Настройка окружения**:  
   - Регистрация в WeatherAPI и получение API-ключа.  
   - Создание Telegram-бота через @BotFather.  
   - Установка зависимостей (`pip install -r requirements.txt`).  

2. **Проектирование архитектуры**:  
   - Реализация функций для работы с API погоды.  
   - Создание системы сохранения/загрузки настроек пользователей.  
   - Разработка клавиатур и обработчиков сообщений.  

3. **Реализация основного функционала**:  
   - Команды `/start`, `/setcity`.  
   - Кнопки: "Погода сейчас", "Прогноз на день", "Настройки".  
   - Логика отправки прогноза (текст + эмодзи).  

4. **Дополнительные функции**:  
   - Ежедневные уведомления через многопоточный планировщик.  
   - Обработка ошибок (некорректный город, проблемы с API).  

5. **Тестирование**:  
   - Проверка корректности ответов API.  
   - Тестирование сохранения настроек.  
   - Проверка работы уведомлений в заданное время.  

6. **Документирование**:  
   - Написание README с инструкцией по запуску.  
   - Создание примеров использования.  

---

### **6. Инструкция по запуску**  
1. Установите зависимости:  
   ```bash
   pip install -r requirements.txt
   ```

2. Создайте файл `.env` в корне проекта:  
   ```ini
   TELEGRAM_TOKEN=ваш_токен_бота
   OWM_API_KEY=ваш_ключ_weatherapi
   ```

3. Запустите бота:  
   ```bash
   python main.py
   ```

---

### **7. Возможные улучшения**  
- Добавить выбор единиц измерения (℃/℉, км/ч/м/с).  
- Интегрировать геолокацию через Telegram.  
- Реализовать прогноз по часам на 24 часа.  
- Добавить графики погоды (используя matplotlib).  
- Перевести хранение настроек в базу данных (SQLite/PostgreSQL).  

---

### **8. Особенности проекта**  
- **Асинхронные уведомления**: Планировщик работает в отдельном потоке.  
- **Локализация**: Перевод дней недели на русский язык.  
- **Удаление сообщений**: Бот удаляет предыдущие сообщения для чистоты интерфейса.  

---


